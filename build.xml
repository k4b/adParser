<?xml version="1.0" encoding="UTF-8"?>
<project name="adParser" default="dist">
	<defaultexcludes add="**/CVS"/>
	<property name="build.dir" value="build"/>
	<property name="build.ver" value="1.0.0-ALPHA"/>
	<property name="dist.dir" value="dist"/>
	<property name="jarfile" value="${build.dir}/adParser-${build.ver}.jar"/>
	<property name="jarallfile" value="${build.dir}/adParserAll-${build.ver}.jar"/>
	<property name="jarminfile" value="${build.dir}/adParserMin-${build.ver}.jar"/>
	<property name="srczip" value="${dist.dir}/adParser-src-${build.ver}.zip"/>
	<property name="srctgz" value="${dist.dir}/adParser-src-${build.ver}.tgz"/>

	<target name="init">
		<tstamp/>
		<mkdir dir="${build.dir}"/>
		<mkdir dir="${dist.dir}"/>
	</target>

	<target name="clean">
		<delete dir="${build.dir}"/>
		<delete dir="${dist.dir}"/>
	</target>

	<target name="compile" depends="init">
		<javac classpath="${classpath}"
			sourcepath=""
			source="1.7"
			target="1.7"
			srcdir="src"
			debug="on"
			destdir="${build.dir}">
			<classpath>
      			<fileset dir="lib">
        			<include name="**/*.jar"/>
      			</fileset>
			</classpath>
			<include name="**/*.java" />
		</javac>
	</target>

	<target name="jar" depends="compile">
		<jar basedir="${build.dir}"
			jarfile="${jarfile}">
			<manifest>
				<attribute name="Main-Class" value="adparser.AdParser"/>
				<attribute name="Classpath" value="./*"/>
			</manifest>
		</jar>
	</target>

	<target name="dist" depends="clean,jar">
		<fileset dir=".">
			<patternset id="distfiles">
				<exclude name="eclipse/**"/>
				<exclude name="extras/**"/>
				<exclude name="sandbox/**"/>
				<exclude name="index/**"/>
			    	<exclude name="${build.dir}/**"/>
				<exclude name="${dist.dir}/**"/>
			</patternset>
		</fileset>
		<copy todir="${dist.dir}">
			<fileset dir="lib"/>
			<fileset file="./plstopwordsUTF8.txt"/>
			<fileset file="./stopwords"/>
			<fileset file="${jarfile}"/>
			<fileset file="${jarallfile}"/>
			<fileset file="${jarminfile}"/>
		</copy>
		<zip destfile="${srczip}">
			<zipfileset dir="." prefix="adParser-${build.ver}">
				<patternset refid="distfiles"/>
			</zipfileset>
		</zip>
		<tar compression="gzip" destfile="${srctgz}">
			<tarfileset dir="." prefix="adParser-${build.ver}">
				<patternset refid="distfiles"/>
			</tarfileset>
		</tar>
	</target>
</project>
